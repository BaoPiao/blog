## 部署模式

Flink目前提供以下三种部署模式：

- `Application Mode`
- `Session Mode`
- `Per-Job Mode (deprecated)`

#### `Application Mode`

应用模式会为提交程序启动一个集群，只用于执行当前任务；且`main()`在集群`JobManager`上运行（能有效降低客户端压力），主要包括生成`JobGraph`、下载依赖包等等

优点：更好的隔离资源

缺点：每次提交任务需要启动集群，资源相对比较浪费

适用于：长时间稳定运行的任务

#### `Session Mode`

`Session`模式需要事先启动好一个集群，所有的任务将运行在同一集群中；

适用于：高频次和短时间的任务

优点：无需每次提交都启动一个集群，可快速提交任务运行， 资源利用率高

缺点：任务之间会产生相互影响、`jobManager`将承受更大的压力，集群故障恢复时可能导致文件系统压力过大问题、客户端运行`main`方法，当多任务提交时会造成客户端压力过大

#### `Per-Job Mode (deprecated)`

`Per-Job Mode (deprecated)`模式和应用模式类似，每个任务都将启动一个集群运行；但`per-job`模式会将`main`方法在客户端运行；

优点：更好的资源隔离

缺点：多个任务提交时，会造成客户端压力过大，资源相对比较浪费

适用于：不推荐使用该模式，当前模式已在1.15版本标记为过时，后续将删除

## 资源选择

### [Standalone](https://nightlies.apache.org/flink/flink-docs-release-1.17/zh/docs/deployment/resource-providers/standalone/) 



### [Kubernetes](https://nightlies.apache.org/flink/flink-docs-release-1.17/zh/docs/deployment/resource-providers/native_kubernetes/)

### [YARN](https://nightlies.apache.org/flink/flink-docs-release-1.17/zh/docs/deployment/resource-providers/yarn/)

## 部署模式&资源选择

| Resource Providers | Application Mode | Session Mode | Per-job Mode |
| :----------------: | :--------------: | :----------: | :----------: |
|   **Standalone**   |        Y         |      Y       |      N       |
|   **Kubernetes**   |        Y         |      Y       |      N       |
|      **YARN**      |        Y         |      Y       |      Y       |



## 调试运行